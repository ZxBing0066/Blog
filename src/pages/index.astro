---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Tags from '../components/Tags.astro';
import BlogTime from '../components/BlogTime.astro';

// Ëé∑ÂèñÊâÄÊúâÂçöÂÆ¢ÊñáÁ´†Âπ∂ÊåâÂèëÂ∏ÉÊó•ÊúüÊéíÂ∫è
const posts = (await getCollection('blog'))
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    .filter(post => !post.data.ignoreInList);
---

<Layout title='ÂòøÂòøÁöÑÂçöÂÆ¢' description='ÂàÜ‰∫´ÂâçÁ´ØÊäÄÊúØÂíå‰∏™‰∫∫ÊÄùËÄÉ'>
    <div class='theme'>
        <Header />
        <main class='main'>
            <div class='home'>
                <div class='container'>
                    <div class='about-card'>
                        <img src='/avatar.webp' alt='avatar' class='avatar' />
                        <div class='introduce'>
                            üëã ‰Ω†Â•ΩÔºåÊàëÊòØ<b>ÂòøÂòø</b>Ôºå‰∏ÄÂêç üë®üèª‚Äçüíª„ÄÇ
                        </div>
                        <div class='announce'>
                            Ê∞¥ËÉΩËΩΩËàüÔºå‰∫¶ÂèØËµõËâá„ÄÇüö§
                            <span class='cursor'>|</span>
                        </div>
                        <ul class='social-media-list'>
                            <li>
                                <a href='https://github.com/ZxBing0066' target='_blank'>
                                    <img src='/github.svg' alt='github' />
                                </a>
                            </li>
                            <li>
                                <a href='https://juejin.cn/user/219558054997710' target='_blank'>
                                    <img src='/juejin.png' alt='juejin' />
                                </a>
                            </li>
                            <li class='popup'>
                                <a>
                                    <img src='/weixin.png' alt='weixin' />
                                </a>
                                <div class='popover'>
                                    <div class='arrow'></div>
                                    <div class='content'>
                                        <img src='/weixin-qrcode.jpg' alt='' />
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href='https://www.zhihu.com/people/ZxBing0066' target='_blank'>
                                    <img src='/zhihu.svg' alt='zhihu' />
                                </a>
                            </li>
                            <li>
                                <a href='https://segmentfault.com/u/zxbing0066' target='_blank'>
                                    <img src='/segmentfault.png' alt='segmentfault' />
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class='list-wrap'>
                        {
                            posts.map((post, i) => (
                                <div class='page-block' style={`animation-delay: ${0.03 * Math.min(i, 15)}s`}>
                                    <div class='left'>
                                        <a href={`/blog/${post.id}/`} class='cover'>
                                            <img src={post.data.heroImage || '/post.jpg'} alt='cover' />
                                        </a>
                                    </div>
                                    <div class='right'>
                                        <a href={`/blog/${post.id}/`} class='title'>
                                            <h2>{post.data.title}</h2>
                                        </a>
                                        <p class='summary'>{post.data.description}</p>
                                        {post.data.tags && <Tags tags={post.data.tags} />}
                                        <BlogTime date={post.data.pubDate} lastUpdated={post.data.updatedDate} />
                                    </div>
                                </div>
                            ))
                        }
                    </div>
                </div>
            </div>
        </main>
        <Footer />
    </div>
</Layout>

<style>
    @keyframes shake-hard {
        2% {
            transform: translate(2px, -9px) rotate(0.5deg);
        }

        4% {
            transform: translate(-5px, 0px) rotate(-1.5deg);
        }

        6% {
            transform: translate(-6px, 1px) rotate(1.5deg);
        }

        8% {
            transform: translate(4px, 6px) rotate(-0.5deg);
        }

        10% {
            transform: translate(-7px, 3px) rotate(1.5deg);
        }

        12% {
            transform: translate(3px, 10px) rotate(1.5deg);
        }

        14% {
            transform: translate(2px, 6px) rotate(-2.5deg);
        }

        16% {
            transform: translate(-4px, -9px) rotate(-0.5deg);
        }

        18% {
            transform: translate(-6px, -4px) rotate(-1.5deg);
        }

        20% {
            transform: translate(10px, -3px) rotate(3.5deg);
        }

        22% {
            transform: translate(-2px, 5px) rotate(2.5deg);
        }

        24% {
            transform: translate(2px, 10px) rotate(3.5deg);
        }

        26% {
            transform: translate(2px, 8px) rotate(2.5deg);
        }

        28% {
            transform: translate(7px, -4px) rotate(-1.5deg);
        }

        30% {
            transform: translate(8px, 7px) rotate(-1.5deg);
        }

        32% {
            transform: translate(0px, 7px) rotate(1.5deg);
        }

        34% {
            transform: translate(9px, 9px) rotate(-0.5deg);
        }

        36% {
            transform: translate(9px, -3px) rotate(2.5deg);
        }

        38% {
            transform: translate(0px, 7px) rotate(-0.5deg);
        }

        40% {
            transform: translate(2px, 6px) rotate(3.5deg);
        }

        42% {
            transform: translate(-2px, -7px) rotate(-0.5deg);
        }

        44% {
            transform: translate(-2px, 7px) rotate(-1.5deg);
        }

        46% {
            transform: translate(8px, -8px) rotate(-0.5deg);
        }

        48% {
            transform: translate(-8px, -9px) rotate(-0.5deg);
        }

        50% {
            transform: translate(10px, 5px) rotate(3.5deg);
        }

        52% {
            transform: translate(0px, 0px) rotate(-0.5deg);
        }

        54% {
            transform: translate(-1px, -8px) rotate(-2.5deg);
        }

        56% {
            transform: translate(-7px, -4px) rotate(2.5deg);
        }

        58% {
            transform: translate(-7px, -9px) rotate(-2.5deg);
        }

        60% {
            transform: translate(7px, 5px) rotate(-1.5deg);
        }

        62% {
            transform: translate(-8px, 1px) rotate(-1.5deg);
        }

        64% {
            transform: translate(7px, 4px) rotate(2.5deg);
        }

        66% {
            transform: translate(0px, 6px) rotate(-2.5deg);
        }

        68% {
            transform: translate(0px, 9px) rotate(-2.5deg);
        }

        70% {
            transform: translate(9px, 4px) rotate(1.5deg);
        }

        72% {
            transform: translate(-9px, 3px) rotate(-0.5deg);
        }

        74% {
            transform: translate(7px, -4px) rotate(-1.5deg);
        }

        76% {
            transform: translate(-1px, 8px) rotate(0.5deg);
        }

        78% {
            transform: translate(-7px, 9px) rotate(3.5deg);
        }

        80% {
            transform: translate(4px, 9px) rotate(3.5deg);
        }

        82% {
            transform: translate(0px, 6px) rotate(3.5deg);
        }

        84% {
            transform: translate(-5px, -2px) rotate(1.5deg);
        }

        86% {
            transform: translate(-4px, 4px) rotate(0.5deg);
        }

        88% {
            transform: translate(0px, -9px) rotate(1.5deg);
        }

        90% {
            transform: translate(4px, 5px) rotate(-0.5deg);
        }

        92% {
            transform: translate(5px, 0px) rotate(2.5deg);
        }

        94% {
            transform: translate(9px, -8px) rotate(2.5deg);
        }

        96% {
            transform: translate(-5px, 3px) rotate(-2.5deg);
        }

        98% {
            transform: translate(-8px, -8px) rotate(1.5deg);
        }

        0%,
        100% {
            transform: translate(0, 0) rotate(0);
        }
    }

    @keyframes bounceInUp {
        0%,
        60%,
        75%,
        90%,
        to {
            -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
            animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
        }

        0% {
            opacity: 0;
            -webkit-transform: translate3d(0, 3000px, 0) scaleY(5);
            transform: translate3d(0, 3000px, 0) scaleY(5);
        }

        60% {
            opacity: 1;
            -webkit-transform: translate3d(0, -20px, 0) scaleY(0.9);
            transform: translate3d(0, -20px, 0) scaleY(0.9);
        }

        75% {
            -webkit-transform: translate3d(0, 10px, 0) scaleY(0.95);
            transform: translate3d(0, 10px, 0) scaleY(0.95);
        }

        90% {
            -webkit-transform: translate3d(0, -5px, 0) scaleY(0.985);
            transform: translate3d(0, -5px, 0) scaleY(0.985);
        }

        to {
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }
    }

    @keyframes blink {
        0%,
        100% {
            opacity: 1;
        }
        50% {
            opacity: 0;
        }
    }

    .home {
        display: flex;
        padding: 2rem 2rem 0;
        max-width: 1000px;
        overflow: hidden;
        margin: 0 auto;
        line-height: 1.8;

        .container {
            width: 100%;
            .main-title {
                text-align: center;
            }
            .subtitle {
                text-align: center;
            }
        }
        .page-block {
            display: flex;
            flex-direction: row;
            gap: 2rem;
            color: var(--color-text);
            box-sizing: border-box;
            padding: 2rem 1rem 1rem;
            transition: transform 0.3s;
            transform: translate(300%);
            animation: bounceInUp 0.5s both;

            .left {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 20rem;
            }
            .cover {
                width: 20rem;
                height: 12rem;
                display: flex;
                img {
                    object-fit: cover;
                    width: 100%;
                    height: 100%;
                }
            }
            .right {
                display: flex;
                flex: 1;
                flex-direction: column;
                justify-content: center;
            }
            &:hover {
                transform: scale(1.05);
            }

            .title {
                font-size: 1.2rem;
                color: var(--color-text);
                :hover {
                    color: var(--color-primary);
                }
                h2 {
                    transition: color 0.2s ease-in-out;
                    margin: 0;
                    line-height: 1.5;
                    font-size: inherit;
                }
            }
            .summary {
                flex: 1;
                margin: 0.5rem 0;
            }
            .tags {
                margin-bottom: 0.5rem;
            }
        }
        .about-card {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin-bottom: 2rem;
            .avatar {
                height: 8rem;
                border-radius: 50%;
                &:hover {
                    animation-name: shake-hard;
                    animation-duration: 100ms;
                    animation-timing-function: ease-in-out;
                    animation-iteration-count: infinite;
                }
            }
            .cursor {
                display: inline-block;
                margin-left: 4px;
                user-select: none;
                animation: blink 1s infinite;
            }
            .introduce {
                margin: 2rem 0 0.5rem;
                font-family: Xingkai SC;
                font-weight: bolder;
                font-size: 1.1rem;
                b {
                    transform: scale(1.2);
                    display: inline-block;
                    padding: 0 0.5rem;
                }
            }
            .announce {
                font-family: Xingkai SC;
                color: var(--color-text-tip);
            }
            .social-media-list {
                list-style: none;
                display: flex;
                gap: 1rem;
                padding: 0;
                li {
                    display: flex;
                    padding: 0;
                    transition: transform 0.3s;
                    a {
                        display: flex;
                        padding: 0.4em;
                        > img {
                            height: 1.5rem;
                        }
                    }
                    &:not(.popup):hover {
                        transform: scale(1.2) rotate(5deg);
                    }
                }
            }
        }
        .popup {
            position: relative;
            .popover {
                display: none;
                position: absolute;
                top: 100%;
                width: 10rem;
                height: 10rem;
                justify-content: center;
                align-items: center;
                transform: translate(-50%, 0);
                margin-left: 50%;
                z-index: 10;
                background: white;
                border: 1px solid var(--color-border);
            }
            .arrow {
                width: 0.4375rem;
                height: 0.4375rem;
                transform: rotate(45deg);
                position: absolute;
                border-top-left-radius: 0rem;
                top: -0.21875rem;
                border-bottom-color: transparent;
                border-right-color: transparent;
                background-color: inherit;
                border: 0.0625rem solid var(--color-border);
            }
            .content {
                z-index: 1;
                display: flex;
            }
            &:hover .popover {
                display: flex;
            }
        }

        @media (max-width: 1000px) {
            padding: 0;
            .page-block {
                flex-direction: column;
                gap: 0;
                .left {
                    width: 100%;
                }
                .left .cover {
                    width: 100%;
                    height: 70%;
                }
                .right {
                    align-items: center;
                    text-align: center;
                }
            }
        }
    }
</style>
