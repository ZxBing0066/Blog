# äºŒåˆ†æ³•ï¼Œä¸æ­¢æ˜¯ç®—æ³• - ä½ å¯èƒ½ä¸çŸ¥é“çš„äºŒåˆ†æ³•åº”ç”¨

äºŒåˆ†æ³•å¤§å®¶éƒ½çŸ¥é“ï¼Œè®°å¾—åº”è¯¥æ˜¯ä»Žåˆä¸­å­¦æ•°å­¦å°±å­¦è¿‡ï¼Œè€Œåœ¨ç¼–ç¨‹ä¸­ä¹Ÿç»å¸¸ä½¿ç”¨äºŒåˆ†æ³•æ¥è¿›è¡Œæœ‰åºæ•°åˆ—çš„æŸ¥æ‰¾ã€‚

ç„¶è€ŒäºŒåˆ†æ³•å¹¶ä¸ç´§ç´§å±€é™äºŽç®—æ³•ä¸­çš„ä½¿ç”¨ï¼Œä»–è¿˜è¢«å¹¿æ³›ä½¿ç”¨äºŽæˆ‘ä»¬çš„å·¥å…·ä¸­ã€æ•°å­¦ä¸­ç”šè‡³ç”Ÿæ´»ä¸­ã€‚

## ç®—æ³•åº”ç”¨

ç®—æ³•ä¸­ä¼šä½¿ç”¨äºŒåˆ†æ³•è¿›è¡ŒæŸ¥æ‰¾ï¼Œç„¶åŽä½¿ç”¨ä¸¤ä¸ªç´¢å¼•æ¥ä»£è¡¨ç›®æ ‡æ•°æ®æ‰€å¯èƒ½åœ¨çš„èŒƒå›´ï¼Œç„¶åŽå°†æ•°ç»„ä»Žä¸­é—´è¿›è¡Œæ‹†åˆ†ï¼Œæ‹¿åˆ°ä¸­é—´æ•°è¿›è¡Œæ¯”å¯¹ï¼Œå³å¯æ ¹æ®æ•°ç»„çš„æŽ’åºé¡ºåºã€ç›®æ ‡å…ƒç´ å’Œä¸­é—´æ•°çš„å¤§å°æ¯”è¾ƒï¼Œå¾—å‡ºæ›´å°çš„æ¯”å¯¹åŒºé—´ï¼Œä»Žè€Œä¸€æ¬¡æ¬¡ç¼©å°æŸ¥æ‰¾èŒƒå›´ï¼Œåœ¨é¢å¯¹å¤§æ•°æ®æ—¶ï¼Œå¯ä»¥æœ‰æ•ˆçš„å‡å°‘æŸ¥æ‰¾æ—¶é—´ï¼Œæå‡æŸ¥æ‰¾æ•ˆçŽ‡ï¼Œå°†äº‹ä»¶å¤æ‚åº¦ç¼©å°åˆ° `O(log2(n))`ã€‚ä¸è¿‡äºŒåˆ†æ³•ä¹Ÿå­˜åœ¨ä¸€å®šå±€é™æ€§ï¼Œå¿…é¡»è¦æ•°ç»„æ˜¯æœ‰åºçš„ã€‚

å¯ä»¥å¤§æ¦‚çœ‹ä¸€ä¸‹å®žçŽ°ï¼Œä¸€æ®µå¹³å¹³æ— å¥‡çš„äºŒåˆ†æŸ¥æ‰¾ä»£ç ï¼š

```ts
export const binarySearch = (arr: number[], target: number): number => {
    const len = arr.length;
    if (!len) return -1;
    let startIndex = 0;
    let endIndex = len - 1;
    while (startIndex <= endIndex) {
        let midIndex = ((startIndex + endIndex) / 2) | 0;
        let midTarget = arr[midIndex];
        if (target === midTarget) return;
        target < midTarget ? (endIndex = midIndex - 1) : (startIndex = midIndex + 1);
    }
    return -1;
};
```

å½“ç„¶ï¼Œä¸Šé¢åªæ˜¯é¡ºå¸¦æè¿‡ï¼Œå¹¶éžæœ¬æ–‡çš„é‡ç‚¹ï¼Œä¸‹é¢è¯´ä¸‹äºŒåˆ†æ³•åœ¨éžç®—æ³•é¢†åŸŸçš„åº”ç”¨ï¼Œçœ‹çœ‹å®ƒçš„åº”ç”¨ä¹‹å¹¿æ³›ï¼Œå¯èƒ½è¶…ä¹Žä½ çš„æƒ³è±¡ã€‚

## Git ä¸­çš„äºŒåˆ†æ³•

git ä¸­å°±å­˜åœ¨äºŒåˆ†æ³•çš„å¦ä¸€ç§åº”ç”¨ï¼šgit bisectã€‚å½“æˆ‘ä»¬ä»£ç ä¸Šçº¿åŽçªç„¶æœ‰ä¸€å¤©ä¸€ä¸ªæœ€è¿‘æ ¹æœ¬æ²¡æ”¹åŠ¨çš„æ¨¡å—å‡ºçŽ°é—®é¢˜äº†ï¼Œä¸€èˆ¬ä¼šå¾ˆéš¾å®šä½é—®é¢˜æ˜¯ç”±å“ªæ¬¡æ”¹åŠ¨å¼•èµ·çš„ã€‚è¿™æ˜¯ä¾¿å¯ä»¥ä½¿ç”¨ git bisect è¿›è¡Œå¸®åŠ©å®šä½ã€‚è¦å¯åŠ¨æˆ‘ä»¬ä¸€èˆ¬ä¼šæŒ‡å®šä¸€ä¸ªèµ·ç‚¹ hashï¼Œç»ˆç‚¹ä¸€èˆ¬å°±æ˜¯å½“å‰ HEADã€‚

```bash
git bisect start HEAD HEAD~10
```

git ä¼šåˆ‡æ¢åˆ° HEAD~10 çš„ commit ä¸Šï¼Œæ­¤æ—¶ä½ å¯ä»¥æŸ¥çœ‹å½“å‰ç‰ˆæœ¬æ˜¯å¦å­˜åœ¨è¯¥ bugï¼Œç„¶åŽæ ¹æ®å­˜åœ¨ç»“æžœåˆ¤å®šè¾“å…¥ `git bisect good` æˆ– `git bisect bad`ã€‚git ä¾¿ä¼šè‡ªåŠ¨åœ¨ bad èŒƒå›´ä¸­è¿›è¡ŒäºŒåˆ†ï¼Œç¼©å°æŸ¥æ‰¾èŒƒå›´ï¼Œç›´åˆ°æœ€ç»ˆç¡®å®šæœ€å…ˆå‡ºçŽ° bug çš„ commitï¼š`a819d21 is the first bad commit`ã€‚

å€ŸåŠ© git bisect å¯ä»¥åœ¨ bug ä¸æ˜Žç¡®æ—¶å¿«é€Ÿå®šä½åˆ°åˆæ¬¡å¯¼è‡´ bug çš„ commitï¼Œä¾¿å¯å€ŸåŠ©å½“æ¬¡ commit ä¸­çš„ä¿®æ”¹ï¼Œå¿«é€Ÿå®šä½åˆ°å¼•èµ· bug çš„åŽŸå› ã€‚

## VSCode ä¸­çš„äºŒåˆ†æ³•

è€Œåœ¨ VSCode ä¸­ï¼ŒäºŒåˆ†æ³•ä¹ŸåŒæ ·æœ‰ç€ç±»ä¼¼çš„ç”¨é€”ã€‚VSCode ä½œä¸ºä¸€ä»£è½»é‡çº§ IDE æ–°ç§€ï¼Œè™½ç„¶åŠŸèƒ½å·²ç»éžå¸¸ä¸°å¯Œï¼Œä½†æ˜¯å¯¹æ¯”ä¸€äº›ä¸“ä¸šçš„ IDE åœ¨å¾ˆå¤šåŠŸèƒ½ä¸Šè¿˜æ˜¯æœ‰æ‰€æ¬ ç¼ºã€‚æ‰€ä»¥å¼€å‘è€…éƒ½ä¼šä½¿ç”¨å¤§é‡æ’ä»¶æ¥å¼¥è¡¥è¿™äº›åŠŸèƒ½ã€‚ç„¶è€Œæ’ä»¶äº”èŠ±å…«é—¨ï¼Œè´¨é‡å‚å·®ä¸é½ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå‡ºçŽ°ä¸€äº›æ’ä»¶å¯¼è‡´å†…å­˜æ³„æ¼ã€CPU çˆ†æ»¡çš„æƒ…å†µã€‚æ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦ä¸€ä¸ªä¸ªç¦ç”¨æ’ä»¶æ¥æŽ’æŸ¥åˆ°åº•æ˜¯ä»€ä¹ˆæ’ä»¶å¯¼è‡´çš„é—®é¢˜ã€‚äºŽæ˜¯ä¹Ž VSCode ä¸­ä¹Ÿå‡ºçŽ°äº†è‡ªå¸¦çš„äºŒåˆ†æ³•å®šä½é—®é¢˜æ’ä»¶çš„åŠŸèƒ½ã€‚

è¦å¯åŠ¨è¯¥åŠŸèƒ½ï¼Œåªéœ€è¦å¯åŠ¨ VSCode å‘½ä»¤è¾“å…¥ Extension Bisectï¼Œä¹Ÿå¯åœ¨æ’ä»¶èœå•ä¸­å¯åŠ¨ã€‚

![picture 2](/image/blog-bisection-all-74.png)

å¯åŠ¨åŽ VSCode æç¤ºæœ¬æ¬¡å¯èƒ½éœ€è¦çš„æ¬¡æ•°ç­‰è¯´æ˜Žï¼Œç¡®å®šåŽä¾¿ä¼šå°†æ’ä»¶è¿›è¡Œæ‹†åˆ†ç¦ç”¨ï¼Œç„¶åŽåœ¨å³ä¸‹è§’è¯¢é—®å½“å‰æƒ…å†µæ˜¯å¦æ­£å¸¸ï¼ˆå¯èƒ½éœ€è¦æ‰‹åŠ¨ç‚¹å‡»å³ä¸‹è§’æ¶ˆæ¯æç¤ºæ‰“å¼€ï¼‰ã€‚

![picture 1](/image/blog-bisection-all-27.png)

ä»Žè€Œä¸€æ¬¡æ¬¡ç¼©å°èŒƒå›´ï¼Œå®šä½åˆ°å¼•èµ·é—®é¢˜çš„æ’ä»¶ã€‚

![picture 1](/image/blog-bisection-all-16.png)

é™¤äº†å®šä½æ’ä»¶çš„ bugï¼Œä½ ä¹Ÿå¯ä»¥å€ŸåŠ©å®ƒæ¥å®šä½æ’ä»¶çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ä½ å¾ˆå¥½å¥‡æŸä¸ª snippet æ˜¯å“ªä¸ªæ’ä»¶æä¾›çš„ï¼ŒåŒæ ·å¯ä»¥å€ŸåŠ©å®ƒæ¥å®šä½ã€‚

## BUG å®šä½ä¸­çš„äºŒåˆ†æ³•

é™¤äº†ä¸Šè¿°å·¥å…·è‡ªå¸¦çš„è¿™äº›åº”ç”¨äº†äºŒåˆ†æ³•çš„å·¥å…·ï¼Œæˆ‘ä»¬åœ¨å®žé™…ç¼–ç¨‹è¿‡ç¨‹ä¸­åŒæ ·å¯ä»¥å€ŸåŠ©äºŒåˆ†æ³•æ¥å®šä½ bugã€‚

é€šå¸¸ä¿® bug æ—¶æœ€éš¾çš„ä¸æ˜¯æ”¹ä»£ç ï¼Œè€Œæ˜¯å®šä½ä»£ç ã€‚é¦–å…ˆå¿…é¡»è¦çŸ¥é“å¯¼è‡´ bug çš„ä»£ç ä½ç½®æ‰èƒ½ä¿®å¤å®ƒã€‚æ‰€ä»¥æ—¥å¸¸é‡åˆ° bug å´æ¯«æ— å¤´ç»ªæ—¶ï¼ŒäºŒåˆ†æ³•å¯ä»¥éžå¸¸æ— è„‘çš„å¸®ä½ ç¼©å°éœ€è¦æŽ’æŸ¥çš„èŒƒå›´ã€‚

é™¤äº†ä¸Šé¢çš„ git bisectï¼Œæˆ‘é€šå¸¸è¿˜ä¼šé€šè¿‡ä»£ç åˆ†å‰²æ¥è¿›è¡Œä»£ç å®šä½ï¼Œæ¯”å¦‚ä¸€ä¸ªé¡µé¢ä¸Šæœ‰å¤šä¸ªæ¨¡å—ï¼Œæ­¤æ—¶ä¾¿å¯å°†æ¨¡å—è¿›è¡ŒåŽ»é™¤ï¼Œç„¶åŽæŸ¥çœ‹ bug æ˜¯å¦æ¶ˆé™¤æ¥ä¸æ–­åˆ¤å®šç¼©å°æŸ¥æ‰¾èŒƒå›´ï¼Œä»Žè€Œæœ€ç»ˆå®šä½ã€‚åˆæ¯”å¦‚é¡µé¢ä¸­çš„æ ·å¼å‡ºçŽ°æ— æ³•ç†è§£çš„æƒ…å†µï¼Œä¹Ÿå¯ä»¥é€šè¿‡å°†ç”Ÿæ•ˆçš„æ ·å¼ã€åµŒå¥—ä½ç½®ç­‰è¿›è¡ŒäºŒåˆ†æ¥è¿›è¡ŒåŽŸå› å®šä½ã€‚

## ç”Ÿæ´»ä¸­çš„äºŒåˆ†æ³•

é™¤äº†ä¸Šè¿°åœ¨ç¼–ç¨‹ä¸­çš„äºŒåˆ†æ³•ä½¿ç”¨ï¼Œæˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•æ¥è§£å†³é—®é¢˜ã€‚

æ¯”å¦‚å‘å¸ƒæ–‡å­—åˆ°ç½‘ä¸Šé‡åˆ° SCï¼Œæ­»æ´»é€šä¸è¿‡è€Œè‡ªå·±åˆæ‰¾ä¸åˆ°å¤±è´¥çš„åŽŸå› ï¼Œå°±å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•åˆ†æ®µå°è¯•å®šä½ã€‚æ¯”å¦‚æ•°æ®ä¸Šä¼ è¿‡å¤§ï¼Œåˆä¸çŸ¥é“ä¸Šä¼ å¤šå¤§çš„æ•°æ®åŒ…åˆé€‚ï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æ³•å°è¯•å‡ºåˆé€‚çš„å¤§å°ã€‚æ¯”å¦‚å’Œå°æœ‹å‹çŽ©æ¸¸æˆï¼ŒæŠ½ä¸€å¼ æ‰‘å…‹ç‰Œã€æˆ–å†™ä¸€ä¸ªæ•°å­—ï¼Œç„¶åŽçœ‹çœ‹è°èƒ½æ›´å¿«çš„çŒœåˆ°æ•°å­—æ˜¯å¤šå°‘ã€‚æ¯”å¦‚ä¸€äº›æœ‰æ„æ€çš„æ•°å­¦é¢˜ï¼Œ100 ä¸ªçœ‹èµ·æ¥ä¸€æ ·çš„çƒé‡Œæœ‰ä¸€ä¸ªé‡é‡æ¯”å…¶å®ƒçš„é‡ï¼Œæœ‰ä¸€ä¸ªå¤©å¹³å¦‚ä½•å¿«é€Ÿçš„æ‰¾å‡ºä¸åŒçš„é‚£é¢—çƒã€‚

## æ€»ç»“

äºŒåˆ†æ³•æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„æ–¹æ³•ï¼Œä»–çš„æœ¬è´¨æ˜¯é€šè¿‡åˆ¤å®šæŸ¥æ‰¾ç›®æ ‡æ˜¯å¦åœ¨æŸä¸ªèŒƒå›´å†…ï¼Œç„¶åŽä¸æ–­å¯¹èŒƒå›´è¿›è¡Œæ‹†åˆ†å®šä½ï¼Œä»Žè€Œè¿›è¡Œæ‰¹é‡çš„ç­›é™¤ï¼Œè¾¾æˆæŸ¥æ‰¾çš„ç›®çš„ã€‚åªè¦åœ¨èƒ½å¤Ÿåˆ¤å®šç›®æ ‡èŒƒå›´çš„æƒ…å†µä¸‹ï¼ŒäºŒåˆ†æ³•éƒ½èƒ½å‘æŒ¥å‡ºä¸é”™çš„æ•ˆæžœã€‚é™¤äº†äºŒåˆ†æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‰åˆ†æ³•ç­‰å…¶å®ƒè¡ç”Ÿçš„æ–¹æ¡ˆï¼Œå…¶æœ¬è´¨æ˜¯æƒ³é€šçš„ã€‚å¦‚æžœå¤§å®¶è¿˜çŸ¥é“å“ªäº›å…³äºŽäºŒåˆ†æ³•çš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œæ¬¢è¿Žç•™è¨€ã€‚

åœ¨ç”Ÿæ´»ä¸­åŒæ ·å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•ï¼Œä¸è¿‡åœ¨ä¸“ä¸šé¢†åŸŸä¸ªäººè§‰å¾—è¿˜æ˜¯è¦ä»¥æ€è€ƒä¸ºä¼˜å…ˆï¼Œèƒ½å¤Ÿç›´æŽ¥åŠ¨è„‘çš„å°±ä¸è¦"åŠ¨æ‰‹"ï¼Œæ¯•ç«ŸäºŒåˆ†æ³•å°±æ˜¯ä¸€ç§è¯•é”™æ³•ï¼ˆæ¯”ä¾æ¬¡è¯•é”™å¥½ä¸€ä¸¢ä¸¢çš„é‚£ç§ï¼‰ï¼Œäº§ç”Ÿä¾èµ–å¾ˆå®¹æ˜“ä¸¢å¤±è‡ªå·±çš„æ€è€ƒèƒ½åŠ›ã€‚ðŸ¤¦â€â™‚ï¸ åœ¨ä¸€äº›éžä¸“ä¸šé¢†åŸŸï¼Œæˆ–è€…ä¸§å¤±æ€è€ƒèƒ½åŠ›çš„æƒ…å†µä¸‹è¿˜æ˜¯å¾ˆæŽ¨èçš„ã€‚ðŸ¶
